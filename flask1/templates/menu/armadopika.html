{% extends '_maingui.html' %}

{% block content %}
<div class="col-lg-8">
    <div class="card card-body bg-light">
        <h3 class="card-header">Ingresar pika armado</h3>
        <div class="card-block">
            <form novalidate method="POST">
                <div class="alert alert-danger fade show" style="display: none;">
                    <p class="mb-0"></p>
                </div>
                <div class="alert alert-success fade show" style="display: none;">
                    <p class="mb-0">Operaci√≥n realizada</p>
                </div>
                <!-- FECHA/HORA -->
                <!-- <div class="form-group row">
                    <div class="col-sm-6">
                        <input type="text" name="fecha" class="form-control" placeholder="Fecha" required="required" readonly>
                    </div>
                    <div class="col-sm-6">
                        <input type="text" name="hora" class="form-control" placeholder="Hora" required="required" readonly>
                    </div>
                </div> -->
                <!-- Pika -->
                <div class="form-group row addable">
                    <div class="col-sm-8">
                        <select class="form-control select2-single select2-hidden-accessible" name="pika" required>
                            <option></option>
                        </select>
                        <div class="invalid-feedback">
                            Elija un pika
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <input type="number" name="cantidad" class="form-control" placeholder="#" required min="1" max="9999">
                    </div>
                </div>
                <!-- BOTONES -->
                <div class="form-group row">
                    <div class="col-sm-4">
                        <button type="button" id="btnAdd" class="btn btn-success btn-block"> + </button>
                    </div>
                    <div class="col-sm-8">
                        <button type="submit" class="btn btn-primary btn-block"">Ingresar</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block js %}
<script type="text/javascript">
$(function() {

    regFormValid();

    //$('input[name=fecha]').val("{{nowfecha}}");
    //$('input[name=hora]').val("{{nowtiempo}}");

    pikasdata = [
        {% for pika in pikas %}
            {
                "id": {{pika.id}},
                "text": "{{pika.nombre}}"
            }
            {% if not loop.last %},{% endif %}
        {% endfor %}
    ]
    pikarowhtml = $('.addable.form-group.row')[0].outerHTML.replace(/ required/g, '');
    sel2('.select2-single[name=pika]', 'Pika', pikasdata);
    $('#btnAdd').click(function(){
        $('.form-group.row').last().before(pikarowhtml);
        sel2('.select2-single[name=pika]', 'Pika', pikasdata);
    });
});
</script>
{% endblock %}